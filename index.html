<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="styles.css" media="screen,projection"/>
        <script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
        
    <script>    
        function goFullScreen()
        {
        var canvas = document.getElementById("jam-canvas");
        if(canvas.requestFullScreen)
        canvas.requestFullScreen();
        else if(canvas.webkitRequestFullScreen)
        canvas.webkitRequestFullScreen();
        else if(canvas.mozRequestFullScreen)
        canvas.mozRequestFullScreen();
        }
    </script>
    
    <script type="text/javascript">
      
      
      var stage;
      var textures = ["Green"]; //Block textures add it here
      var selected = null;
      var squares = [];
      
      function getRandomNumber()
      {
          return Math.floor(Math.random()); //Randomize the ratio of the color/texture in the 10x10 Grid : multiply by the ratio of the color so : Math.random() * 3 );
      }
      
      /**
       * Generate the world environment 10x10 grid with random tiles.
       */
      function generateWorld()
      {

      /* Generate 10x10 Grid */    
          var square;
          for (var x = 0; x < 10; x++)
              {
                  for (var y = 0; y < 10; y++)
                      {
                          var texture = textures[getRandomNumber()];
                          var graphic = new createjs.Graphics();
                          graphic.beginStroke(createjs.Graphics.getRGB(0,0,0));
                          graphic.setStrokeStyle(1);
                          graphic.beginFill(texture);
                          graphic.drawRect(0,0,50,50);
                          square = new createjs.Shape(graphic);
                          square.x = x * 50; //Readjust the x position with the size of the next square.
                          square.y = y * 50; //Readjust the y position with the size of the next square.
                          // square.addEventListener("click", squareClick); //User interaction or Input calls to method squareClick()
                          stage.addChild(square);
                          
                          var id = square.x + "_" + square.y;
                          squares[id] = square;
                      }
              }
              
      /* Generate circle with initial position x and position y from database */
      var circle = new createjs.Shape();
      circle.graphics.beginFill("red").drawCircle(0,0,25);
      circle.x = 25; // To move 1 x block is 50. position x -> Grab the current position x from database for every user command then update map
      circle.y = 25; // To move 1 y block is 50. position y -> same as x but for position y
      
      /* Boundary Handling should be taken care of by the game engine (cpp game). Should passed Null on edge */
      
      stage.addChild(circle);
          
              stage.update();
      }
      
      
      /* User Control Template */
      function move(action)
      {
          switch(action)
          {
              case "left":
                  alert('Moving Left');
                  circle.x = x + 50;
                  //Some additional code here to update database/passed it back to game engine etc.
                  break;
              case "right":
                  alert('Moving Right');
                  circle.x = x - 50;
                  //Some additional code here to update database/passed it back to game engine etc.
                  break;
              case "up":
                  alert('Moving Up');
                  circle.y = y + 50;
                  //Some additional code here to update database/passed it back to game engine etc.
                  break;
              case "down":
                  alert('Moving Down');
                  circle.y = y - 50;
                  //Some additional code here to update database/passed it back to game engine etc.
                  break;
              case "null":
                  alert('You have reached the end of the world, cant move there');
                  //No updates
                  break;
          }
          stage.update();
      }
     
      
      function removeFromArray(x,y)
      {
          var index = $.inArray(x + "_" + y, squares);
          squares.splice(index,1);         
      }
      
      /**
       * An event handler for when the user clicks on a square
       */
      
      
      function squareClick(e)
      {
          if (selected == null) //First click
              {
                  selected = 
                  {
                    x: e.target.x,
                    y: e.target.y,        
                  };
          
                  var current = squares[e.target.x + "_" + e.target.y];
                  current.alpha = 0.5;
              }
              else // Second click
              {
                  var originalIndex = selected.x + "_" + selected.y;
                  var original = squares[originalIndex];
                  removeFromArray(original.x, original.y);
                    
                  var currentIndex = e.target.x + "_" + e.target.y;
                  var current = squares[currentIndex];
                  removeFromArray(current.x, current.y);
                  
                  var tempX = original.x;
                  var tempY = original.y;
                  
                  original.x = current.x;
                  original.y = current.y;
                  original.alpha = 1;
                  squares[currentIndex] = original;
                  
                  current.x = tempX;
                  current.y = tempY;
                  squares[originalIndex] = current;
                  
                  selected = null;
              }
              
              stage.update();
      }
     
   
    </script>
       
    
    <script> 
        function init()
        {
          stage = new createjs.Stage("jam-canvas");
          generateWorld();
        }
    </script>
    
    
        
    </head>
    
<body onload=init();>
    <div id="container">
    <canvas id="jam-canvas" width="640" height="500">
    Your browser does not support html5 Canvas!
    </canvas>
    
    <br />
    <!-- float inputs over canvas -->
    <div id="controls" style="z-index:9999;">
        <button id="btnRestart" onclick="move('left');">Left</button>
        <button id="btnFall" onclick="move('right');">Right</button>
        <button id="btnStand" onclick="move('up');">Up</button>
        <button id="Button1" onclick="move('down');">Down</button>
        <p><button id="fullscreen-button" onclick=goFullScreen();>Full Screen</button></p>
        <button id="Start" onclick=startGame();>Start</button><button id="Reset" onclick=reset();>Reset</button>

        <script src="quick_example.js"></script>
        <script>
        document.write('lerp result: ' + Module.lerp(5, 10, 0.5));
        </script>
    </div>
    
    </div>
  
</html>
    



</body>
    

    
</html>
